name: cc-sdd-requirements
description: SDD Phase 1 - Generates requirements document in EARS format
piece_config:
  provider_options:
    codex:
      network_access: true
    opencode:
      network_access: true
max_movements: 10
initial_movement: generate-requirements

personas:
  requirements-analyst: ../facets/personas/requirements-analyst.md

policies:
  ears-format: ../facets/policies/ears-format.md

instructions:
  generate-requirements: ../facets/instructions/cc-sdd-generate-requirements.md

report_formats:
  cc-sdd-requirements: ../facets/output-contracts/cc-sdd-requirements.md

movements:
  - name: generate-requirements
    edit: true
    persona: requirements-analyst
    policy: ears-format
    allowed_tools:
      - Read
      - Glob
      - Grep
      - Write
      - Bash
      - WebSearch
      - WebFetch
    required_permission_mode: edit
    instruction: generate-requirements
    output_contracts:
      report:
        - name: requirements.md
          format: cc-sdd-requirements
    rules:
      - condition: Requirements are clear and complete
        next: COMPLETE
      - condition: Insufficient information, requirements unclear
        next: ABORT
        appendix: |
          Items to clarify:
          - {unclear_point_1}
          - {unclear_point_2}
