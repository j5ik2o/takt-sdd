name: cc-sdd-steering-custom
description: カスタムcc-sdd-steeringドキュメントを作成する（API標準、テスト戦略、セキュリティ等）
max_movements: 10
initial_movement: detect

# --- カスタムファセット セクションマップ ---
personas:
  cc-sdd-steering-analyst: ../facets/personas/cc-sdd-steering-analyst.md

policies:
  cc-sdd-steering-principles: ../facets/policies/cc-sdd-steering-principles.md

instructions:
  detect: ../facets/instructions/detect-cc-sdd-steering-custom.md
  generate: ../facets/instructions/generate-cc-sdd-steering-custom.md

knowledge:
  cc-sdd-steering-custom-templates: ../facets/knowledge/cc-sdd-steering-custom-templates.md

report_formats:
  cc-sdd-steering-custom: ../facets/output-contracts/cc-sdd-steering-custom.md

# --- Movement定義 ---
movements:
  # ===== 対象検出 =====
  - name: detect
    edit: false
    persona: cc-sdd-steering-analyst
    allowed_tools:
      - Read
      - Glob
      - Grep
    instruction: detect
    rules:
      - condition: 対象トピック特定完了（テンプレートあり or スクラッチ）
        next: generate
      - condition: トピックが不明確、情報不足
        next: ABORT
        appendix: |
          確認事項:
          - {不明点}

  # ===== カスタムcc-sdd-steering生成 =====
  - name: generate
    edit: true
    persona: cc-sdd-steering-analyst
    policy: cc-sdd-steering-principles
    knowledge: cc-sdd-steering-custom-templates
    allowed_tools:
      - Read
      - Glob
      - Grep
      - Write
      - Bash
    required_permission_mode: edit
    instruction: generate
    output_contracts:
      report:
        - name: cc-sdd-steering-custom-report.md
          format: cc-sdd-steering-custom
    rules:
      - condition: カスタムcc-sdd-steeringファイル生成完了
        next: COMPLETE
      - condition: コードベースの情報が不足、生成不可
        next: ABORT
        appendix: |
          原因:
          - {問題点}
