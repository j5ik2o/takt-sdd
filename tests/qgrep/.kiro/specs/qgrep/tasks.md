- [x] 1. 実装と検証の基盤を整える
- [x] 1.1 Rustの標準初期化手順で検索CLIの実行基盤を整備する
  - 実行可能な検索コマンドと依存ライブラリを利用できる土台を準備する
  - 単体テストと統合テストを同じテスト実行で起動できる状態にする
  - _Requirements: 9.1, 9.7, 9.8_
- [x] 1.2 入力解釈と入力妥当性判定の振る舞いを実装する
  - 正規表現検索と固定文字列検索の切り替えを受理できるようにする
  - 不正な正規表現と不正な文脈件数を入力エラーとして扱う
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 5.6, 7.1_
- [x] 1.3 探索対象の収集規則を実装する
  - ファイル指定時は単一対象、ディレクトリ指定時は再帰対象として扱う
  - 探索起点に応じた無視規則を適用して候補集合を決定する
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [x] 2. 検索対象の絞り込みと検索実行を構築する
- [x] 2.1 パス条件と拡張子条件による絞り込みを実装する
  - include条件とexclude条件を併用できるようにし、衝突時は除外を優先する
  - 絞り込み後に対象が0件の場合は一致結果を出力しない
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6_
- [x] 2.2 複数対象の同時検索と決定的な整列を実装する
  - 検索対象が複数ある場合は並列実行基盤で同時検索する
  - 出力対象をファイル昇順、同一ファイル内を行番号昇順で整列する
  - _Requirements: 6.1, 6.2, 6.3, 6.4_
- [x] 2.3 一致行の前後文脈抽出を実装する
  - 前方、後方、両側の文脈指定に応じて必要行を付与する
  - 先頭と末尾の不足を安全に切り詰め、追加件数0では文脈を付与しない
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.7, 5.8_

- [x] 3. 出力表現と終了判定を実装する
- [x] 3.1 テキスト出力の一致行と文脈行の表現を実装する
  - 一致行ごとにファイル名と行番号を含めて出力する
  - 文脈行と一致行を区別し、非連続グループの境界を明示する
  - _Requirements: 4.1, 4.2, 4.3, 5.1, 5.2, 5.3, 5.4_
- [x] 3.2 JSON出力オプションの機械可読出力を実装する
  - 一致1件ごとに1行のJSONオブジェクトを出力し、文脈情報を配列で含める
  - JSON出力時はプレーンテキストの一致行を出力しない
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8_
- [x] 3.3 実行中問題の扱いと終了コード判定を実装する
  - 実行中問題を分類し、継続可能な問題と中断すべき問題を分けて扱う
  - 一致有無と問題有無の組み合わせから互換終了コードを返す
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 1.4, 5.6_

- [x] 4. 要件を固定する自動テストを実装する
- [x] 4.1 (P) 検索方式と絞り込み規則の単体テストを実装する
  - 検索方式の切り替え、不正入力判定、絞り込み優先順位を検証する
  - 絞り込み後0件時の振る舞いと整列規則の前提を検証する
  - _Requirements: 9.2, 9.3, 1.1, 1.2, 1.3, 1.4, 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 6.3, 6.4_
- [x] 4.2 (P) 文脈抽出と終了コード判定の単体テストを実装する
  - 文脈境界条件と重複抑止の振る舞いを検証する
  - 実行中問題の有無による終了コード優先規則を検証する
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8, 8.1, 8.2, 8.3, 8.4_
- [x] 4.3 統合テストで実行経路の振る舞いを検証する
  - 再帰探索、無視規則、並列検索、整列順序を実行シナリオで検証する
  - テキスト出力、JSON出力、終了コードをシナリオ別に検証する
  - _Requirements: 9.4, 9.5, 9.6, 2.1, 2.2, 2.3, 2.4, 4.1, 4.2, 4.3, 6.1, 6.2, 6.3, 6.4, 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8, 8.1, 8.2, 8.3, 8.4_
